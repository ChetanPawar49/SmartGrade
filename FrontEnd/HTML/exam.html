<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Page</title>
    <style>
        /* Default styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #c1c5cb;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 8px 11px rgb(55 42 53 / 41%);
            padding: 20px;
            box-sizing: border-box;
        }

        .progress-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .progress-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #ddd;
            margin: 0 15px;
            background-color: #f8f9fa;
        }

        .progress-circle.filled {
            background-color: #007bff;
            border-color: #007bff;
        }

        .question-container {
            margin-bottom: 20px;
        }

        .question {
            font-size: 1.6rem;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .options {
            margin-bottom: 20px;
        }

        .option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f9fa;
        }

        .option input[type="radio"] {
            margin-right: 10px;
        }

        .option.selected {
            background-color: #cce5ff;
            border-color: #004085;
        }

        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .btn-container button {
            flex: 1;
            margin: 0 5px;
            padding: 12px;
            border: none;
            border-radius: 5px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            background-color: #007bff;
            transition: background-color 0.2s, transform 0.2s;
        }

        .btn-prev {
            background-color: #6c757d;
        }

        .btn-submit {
            background-color: #28a745;
        }

        .btn-next {
            background-color: #007bff;
        }

        .btn-container button:disabled {
            background-color: #a0abb7;
            cursor: not-allowed;
        }

        .result-container {
            display: none;
            text-align: center;
        }

        .result-container h2 {
            font-size: 1.6rem;
            margin-bottom: 20px;
        }

        .result-container p {
            font-size: 1.2rem;
        }

        .result-container button {
            margin-top: 20px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            background-color: #007bff;
            transition: background-color 0.2s, transform 0.2s;
        }

        .result-container button:hover {
            background-color: #0056b3;
        }

        /* Forced Colors Mode styles */
        @media (forced-colors: active) {
            body {
                background-color: Window; /* Adjust background color for forced colors */
            }

            .quiz-container {
                background-color: WindowText; /* Adjust container color for forced colors */
                color: WindowText; /* Adjust text color for forced colors */
                border-color: Highlight; /* Adjust border color for forced colors */
            }

            .option {
                border-color: Highlight; /* Adjust border color for forced colors */
            }

            .btn-container button {
                background-color: Highlight; /* Adjust button background for forced colors */
            }

            .btn-container button:disabled {
                background-color: GrayText; /* Adjust disabled button background for forced colors */
            }

            .result-container {
                color: WindowText; /* Adjust result text color for forced colors */
            }

            .result-container button {
                background-color: Highlight; /* Adjust result button background for forced colors */
            }

            .result-container button:hover {
                background-color: Highlight; /* Adjust result button hover color for forced colors */
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="progress-container">
            <!-- Progress circles will be dynamically inserted here -->
        </div>
        <div id="quiz">
            <form id="quiz-form">
                <div class="question-container">
                    <div class="question" id="question-text">Question 1: What is the time complexity of binary search?</div>
                    <div class="options" id="options">
                        <!-- Options will be dynamically inserted here -->
                    </div>
                </div>
                <div class="btn-container">
                    <button id="prev-button" class="btn btn-prev" disabled>Previous</button>
                    <button id="submit-button" class="btn btn-submit" type="submit" disabled>Submit</button>
                    <button id="next-button" class="btn btn-next">Next</button>
                </div>
            </form>
        </div>
        <div id="result" class="result-container">
            <h2>Exam Submitted Successfully!</h2>
            <p id="result-message">Thank you for completing the quiz. Your responses have been recorded.</p>
            <button id="home-button">Go to Home</button>
        </div>
    </div>
    <script>
        const questions = [
            { question: 'What is the time complexity of binary search?', options: ['O(1)', 'O(log n)', 'O(n)', 'O(n log n)'] },
            { question: 'Which data structure uses LIFO (Last In First Out) principle?', options: ['Queue', 'Stack', 'Array', 'Linked List'] },
            { question: 'What is the output of `console.log(2 + \'2\')` in JavaScript?', options: ['4', '22', 'undefined', 'NaN'] },
            { question: 'Which sorting algorithm has the best average time complexity?', options: ['Bubble Sort', 'Merge Sort', 'Insertion Sort', 'Quick Sort'] },
            { question: 'What is the purpose of a hash table?', options: ['Store elements in a sorted order', 'Allow for constant time lookups', 'Implement a stack', 'Perform binary search'] },
            { question: 'Which keyword is used to define a class in Python?', options: ['class', 'def', 'struct', 'type'] },
            { question: 'In which algorithm is a divide and conquer strategy used?', options: ['Breadth-First Search', 'Depth-First Search', 'Merge Sort', 'Linear Search'] },
            { question: 'What is a common characteristic of a recursive function?', options: ['It always terminates', 'It calls itself', 'It uses iteration', 'It has constant space complexity'] },
            { question: 'Which of the following is a statically typed language?', options: ['JavaScript', 'Python', 'Java', 'PHP'] },
            { question: 'What is the primary use of the `this` keyword in JavaScript?', options: ['To reference the global object', 'To reference the current function', 'To reference the current object', 'To reference the parent object'] }
        ];

        let currentQuestionIndex = 0;
        const answers = new Array(questions.length).fill(null);

        function createProgressCircles() {
            const progressContainer = document.querySelector('.progress-container');
            progressContainer.innerHTML = ''; // Clear existing circles

            questions.forEach((_, index) => {
                const circle = document.createElement('div');
                circle.className = 'progress-circle';
                progressContainer.appendChild(circle);
            });
        }

        function updateProgressCircles() {
            const circles = document.querySelectorAll('.progress-circle');
            circles.forEach((circle, index) => {
                if (answers[index] !== null) {
                    circle.classList.add('filled');
                } else {
                    circle.classList.remove('filled');
                }
            });
        }

        function showQuestion(index) {
            const question = questions[index];
            document.getElementById('question-text').textContent = `Question ${index + 1}: ${question.question}`;
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';

            question.options.forEach((option) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = `
                    <label>
                        <input type="radio" name="option" value="${option}" ${answers[index] === option ? 'checked' : ''}>
                        ${option}
                    </label>
                `;
                optionDiv.addEventListener('click', () => selectOption(option));
                optionsDiv.appendChild(optionDiv);
            });

            document.getElementById('prev-button').disabled = index === 0;
            document.getElementById('next-button').disabled = index === questions.length - 1;
            document.getElementById('submit-button').disabled = answers.includes(null);

            updateProgressCircles(); // Update progress circles on question change
        }

        function selectOption(selectedOption) {
            answers[currentQuestionIndex] = selectedOption;
            document.querySelectorAll('.option').forEach(optionDiv => {
                optionDiv.classList.toggle('selected', optionDiv.querySelector('input').value === selectedOption);
            });
            document.getElementById('submit-button').disabled = answers.includes(null);
            updateProgressCircles(); // Update progress circles on option selection
        }

        document.getElementById('next-button').addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        });

        document.getElementById('prev-button').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        });

        document.getElementById('quiz-form').addEventListener('submit', (event) => {
    event.preventDefault();

    

    fetch('/save-answers', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ answers })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
    })
    .then(data => {
        console.log('Your answers have been submitted successfully!', data);
        showResult();
    })
    .catch(error => {
        console.error('Error:', error);
        console.log('There was a problem submitting your answers. Please try again.');
    });
});


        function showResult() {
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('result').style.display = 'block';
        }

        document.getElementById('home-button').addEventListener('click', () => {
            // Navigate to the home page
            window.location.href = '/'; // Replace with your actual home URL
        });

        document.addEventListener('DOMContentLoaded', () => {
            createProgressCircles(); // Create progress circles when page loads
            showQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>
